#summary Installing USB modem on linksys wrt160nl

= Introduction =

This page details the steps for using various USB Modems with OpenWRT.  Though we have not tried it, we suspect that it is possible to use a single linksys with both a USB Storage device and a USB modem by adding a USB hub. This page currently explains how to install the modem on a stock OpenWRT image.  

When using a USB modem as an uplink we always suggest running s squid cache on your headnode for best performance.

= Basic Requirements =

All USB Modem applications will require (or at least won't be hurt by the following:

  # Install stock image
  # remove kmod-usb-ohci
  # install usbutils kmod-usb-serial kmod-usb2 kmod-usb-uhci usb-modeswitch usb-modeswitch-data comgt (auto-installed dependencies libusb zlib chat)

= Device Specific Instructions =

== ZTE AC 2726 ==

_Note: This device currently may require hotplugging between connections to work correctly.  I suspect we're missing some sore of reset in the disconnect commands_ 

  # edit /etc/modules.d/60-usb-serial
{{{
usbserial vendor=0x19d3 product=0xfff1 maxSize=4096
}}}
  # Mod network settings:
{{{
config interface wan                                                                                                                  
        option ifname   ppp0                                                                                                          
        option proto    3g                                                                                                            
        option auto     1                                                                                                             
        option service  evdo                                                                                                          
        option device   /dev/ttyUSB0                                                                                                  
        option apn      orange.co.ke                                                                                                  
        option username <phone #>                                                                                                   
        option password <pin>
}}}



Now your device should be recognised and have the correct device type (0xfff1 - read from lsusb)

NOTES:

on reboot, device is recognized after a while (I think).  In it's base state light blinks red. you have to manually switch it (usb_modeswitch /etc/usb_modeswitch.d/19d2\:fff5), then ifup wan works and turns light fast blinking green.

== Huawei E160 / 220 ==

[http://josefsson.org/openwrt/dongle.html Start here] and scroll down to "Enabling 3G/UMTS"